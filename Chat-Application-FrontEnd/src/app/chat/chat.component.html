<div class="chat-container">
    <div class="chat-wrapper">
      <!-- Header -->
      <div class="chat-header">
        <h2 class="glow-text">Welcome to <span class="highlight">{{roomName}}</span></h2>
        <button (click)="leaveChat()" class="neon-button danger">
          <span class="button-text"><i class="fas fa-sign-out-alt"></i> Leave Chat</span>
        </button>
      </div>

      <div class="chat-content">
        <!-- Users Sidebar -->
        <div class="users-sidebar">
          <div class="users-header">
            <h3 class="glow-text-subtle">Connected Users</h3>
            <div class="search-box glass-input">
              <input type="text" placeholder="Search users...">
              <i class="fas fa-search glow-icon"></i>
            </div>
          </div>

          <div class="users-list">
            <ng-container *ngFor="let user of this.chatService.connectedUsers$ | async">
              <div class="user-item glass-effect">
                <div class="user-avatar">
                  <img [src]="'https://api.dicebear.com/7.x/avataaars/svg?seed=' + user" [alt]="user">
                  <span class="status-badge glow-badge"></span>
                </div>
                <div class="user-info">
                  <h4 class="glow-text-subtle">{{user}}</h4>
                  <span class="status">Online</span>
                </div>
              </div>
            </ng-container>
          </div>
        </div>

        <!-- Chat Area -->
        <div class="chat-area">
          <div #scrollMe class="messages-container">
            <ng-container *ngFor="let message of this.chatService.messages$ | async">
              <div class="message" [ngClass]="{'message-received': message.user != loggedInUserName, 
                                             'message-sent': message.user === loggedInUserName}">
                <div class="message-content">
                  <div class="message-bubble glass-effect">
                    <p>{{message.message}}</p>
                  </div>
                  <div class="message-info">
                    <span class="message-author glow-text-subtle">{{message.user}}</span>
                    <span class="message-time">{{message.messageTime | date: 'shortTime'}}</span>
                  </div>
                </div>
              </div>
            </ng-container>
          </div>

          <!-- Message Input -->
          <div class="message-input">
            <input 
              class="glass-input"
              type="text" 
              [(ngModel)]="inputMessage" 
              (keydown.enter)="sendMessage()" 
              placeholder="Type your message here..."
            >
            <button (click)="sendMessage()" class="neon-button">
              <span class="button-text"><i class="fas fa-paper-plane"></i></span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>